var status;
var select;

검정 = "#fc0xFF191919#"
var 칭호 = new Array(3700000, 3700001, 3700002, 3700003, 3700004, 3700005, 3700006, 3700007, 3700008, 3700009, 3700010, 3700011, 3700012, 3700013, 3700014, 3700015, 3700016, 3700017, 3700018, 3700019, 3700020, 3700025, 3700026, 3700030, 3700031, 3700032, 3700033, 3700034, 3700035, 3700036, 3700037, 3700039, 3700040, 3700041, 3700042, 3700043, 3700044, 3700045, 3700046, 3700047, 3700048, 3700049, 3700053, 3700054, 3700055, 3700056, 3700057, 3700058, 3700059, 3700060, 3700061, 3700062, 3700063, 3700064, 3700065, 3700066, 3700067, 3700068, 3700073, 3700074, 3700075, 3700076, 3700077, 3700078, 3700079, 3700080, 3700081, 3700082, 3700083, 3700084, 3700085, 3700086, 3700087, 3700088, 3700090, 3700091, 3700092, 3700093, 3700094, 3700095, 3700096, 3700098, 3700099, 3700100, 3700101, 3700102, 3700103, 3700104, 3700105, 3700106, 3700107, 3700108, 3700109, 3700110, 3700111, 3700112, 3700117, 3700118, 3700119, 3700120, 3700124, 3700125, 3700126, 3700127, 3700128, 3700129, 3700130, 3700131, 3700132, 3700133, 3700134, 3700135, 3700136, 3700141, 3700142, 3700143, 3700144, 3700145, 3700146, 3700147, 3700148, 3700149, 3700150, 3700151, 3700152, 3700153, 3700154, 3700156, 3700157, 3700158, 3700159, 3700160, 3700161, 3700162, 3700163, 3700164, 3700165, 3700166, 3700168, 3700169, 3700170, 3700171, 3700172, 3700173, 3700174, 3700175, 3700176, 3700177, 3700178, 3700179, 3700180, 3700181, 3700182, 3700183, 3700184, 3700185, 3700186, 3700188, 3700189, 3700190, 3700191, 3700192, 3700193, 3700194, 3700198, 3700199, 3700200, 3700201, 3700214, 3700215, 3700216, 3700217, 3700218, 3700219, 3700220, 3700222, 3700228, 3700229, 3700230, 3700231, 3700242, 3700243, 3700244, 3700245, 3700247, 3700248, 3700249, 3700250, 3700251, 3700252, 3700253, 3700254, 3700263, 3700264, 3700268, 3700269, 3700270, 3700271, 3700272, 3700278, 3700279, 3700280, 3700281, 3700282, 3700283, 3700284, 3700285, 3700286, 3700287, 3700288, 3700305, 3700306, 3700307, 3700308, 3700321, 3700322, 3700334, 3700335, 3700336, 3700337, 3700338, 3700339, 3700341, 3700342, 3700343, 3700344, 3700350, 3700351, 3700352, 3700353, 3700354, 3700355, 3700356, 3700376, 3700377, 3700378, 3700380, 3700385, 3700388, 3700389, 3700390, 3700402, 3700403, 3700417, 3700418, 3700419, 3700420, 3700421, 3700422, 3700425, 3700429, 3700430, 3700431, 3700432, 3700433, 3700434, 3700435, 3700436, 3700438, 3700439, 3700440, 3700441, 3700442, 3700444, 3700445, 3700446, 3700447, 3700448, 3700453, 3700454, 3700457, 3700461, 3700465, 3700466, 3700468, 3700474, 3700475, 3700476, 3700477, 3700478, 3700486, 3700489, 3700490, 3700492, 3700503, 3700510, 3700511, 3700512, 3700513, 3700514, 3700524, 3700525, 3700526, 3700528, 3700529, 3700530, 3700533, 3700534, 3700535, 3700536, 3700537, 3700538, 3700539, 3700540, 3700541, 3700542, 3700543, 3700544, 3700545, 3700546, 3700548, 3700550, 3700582, 3700598, 3700599, 3700617, 3700619, 3700620, 3700625, 3700629, 3700652, 3700655, 3700656, 3700657, 3700658, 3700660, 3700661, 3700662, 3700663, 3700664, 3700666, 3700681, 3700682, 3700683, 3700687, 3700688, 3700700, 3700703, 3700705);
var 코인 = 4319999
var 필요개수 = 500;
var item = 0;

function start() {
    status = -1;
    action(1, 1, 0);
}

function action(mode, type, selection) {
    if (mode == -1) {
        cm.dispose();
    } else {
        if (mode == 0) {
            cm.dispose();
            return;
        }
        if (mode == 1)
            status++;
        else
            status--;
        if (status == 0) {
            var leaf = cm.itemQuantity(4319999);
            var text = ""
            text = "#fs11#"+검정+"저는 #fc0xFF000087#[닉스]#k "+검정+"컨텐츠 부서에서 #b칭호 뽑기#k"+검정+"를 담당하고 있는 제크이라고 합니다."
            text += "\r\n칭호 뽑기 한번 당 #r#z4319999# 500개#k"+검정+"로 가 가능합니다.\r\n\r\n";
            text += "현재 보유중인 #d#z4319999##k 갯수 : #e#r"+leaf+"#k개#n\r\n"
            text += "#fc0xFFD5D5D5#───────────────────────────#k\r\n";
            text += "#L0##fc0xFF3B36CF#칭호를 뽑고 싶습니다.\r\n"
            cm.sendSimple(text)
        } else if (status == 1) {
            if (selection == 12) {
                var amed = "#fs11##fc0xFB1B66FF#칭호 리스트#k\r\n\r\n";
                for (var i = 0; i < 칭호.length; i++) {
                    amed += "#i" + 칭호[i] + "# #fc0xFF6B66FF##z" + 칭호[i] + "#\r\n";
                }
                cm.sendOk(amed);
                cm.dispose();
            } else {
                item = selection;
                if (!cm.haveItem(4319999, 500)) {
		            cm.sendOk("#fs11##i4319999# #b#z4319999##k 아이템이 부족하거나 없는거 같네요.");
                    cm.dispose();
                } else {
                    cm.sendYesNo("#fs11#정말로 #b칭호#k를 뽑으시겠습니까?\r\n뽑기 진행 시 #r#z4319999# 500개#k가 소모됩니다.");
                }
            }
        } else if (status == 2) {
            switch (item) {
                case 0:
                    칭호 = 칭호[Math.floor(Math.random() * 칭호.length)];
                    if (cm.canHold(칭호)) {
                        cm.gainItem(칭호, 1);
                        cm.gainItem(4319999, -500);
                        말 = "#fs11#축하드려요 #b#h ##k님! 원하시던 데미지 스킨은 나오셨나요? 마음에 들지 않는다면 한번 더 뽑아보시는건 어떨까요?\r\n\r\n"
                        말 += "#fUI/UIWindow2.img/QuestIcon/4/0#\r\n"
                        말 += "#i" + 칭호 + "# #b#z" + 칭호 + "##k\r\n\r\n"
                        말 += "#L0##fc0xFF3B36CF#한번 더 뽑고 싶습니다.\r\n#L1#대화창 닫기"
                        cm.sendOk(말);
                    } else {
                        cm.sendOk("#fs11#칭호를 받기 위한 공간이 부족한거 같네요.");
                        cm.dispose();
                    }
                    break;
            } 
        } else if (status ==3) {
            if (selection == 0) {
                cm.dispose();
                cm.openNpc(9072201);
            } else {
                cm.dispose();
            }
        }
    }
}